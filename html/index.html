<!DOCTYPE html>
<html ng-app="app">

<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>PAI2019</title>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
	<link rel="stylesheet" href="/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/index.css">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
</head>
    
<body class="workarea" ng-controller="Ctrl as ctrl">
    
    <div class="container">

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation" ng-controller="Menu as ctrl">
	        <div class="container-fluid">

				<div class="navbar-header">

					<button type="button" class="navbar-toggle" ng-click="ctrl.isCollapsed = !ctrl.isCollapsed">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>

				</div>

				<div class="navbar-collapse" ng-class="ctrl.isCollapsed ? 'collapse' : 'in'">

				    <ul class="nav navbar-nav">
						<li ng-repeat="menuPos in ctrl.menu" ng-class="ctrl.navClass(menuPos.route)">
							<a href="#{{menuPos.route}}" ng-bind-html="menuPos.title"></a>
						</li>
				  	</ul>

					<ul class="nav navbar-nav navbar-right">
						<li><a ng-bind-html="ctrl.loginIcon()" ng-click="ctrl.login()"></a></li>
					</ul>

				</div>
	        </div>
		</nav>
	
        <div ng-view></div>

        <div style="text-align: right;" ng-if="!ctrl.login">
            <input placeholder="email" type="text" class="form-inline" ng-model="ctrl.creds.email"/>
            <input placeholder="hasło" type="password" class="form-inline" ng-model="ctrl.creds.password"/>
            <button class="btn btn-primary" ng-click="ctrl.doLogin()">Login</button>
        </div>

        <div style="text-align: right;" ng-if="ctrl.login">
            <span ng-bind="ctrl.login"></span>
            <button class="btn btn-primary" ng-click="ctrl.doLogout()">Logout</button>
        </div>

        <div ng-if="ctrl.login">
            <h1>Konto</h1>
        
            <h3>Saldo <span ng-bind="ctrl.account.balance"></span></h3>
            <p>Limit <span ng-bind="ctrl.account.limit"></span></p>
            
            <p>Operacja
                <select class="form-inline" ng-model="ctrl.transaction.operation">
                    <option value="wi">Wypłata</option>
                    <option value="de">Wpłata</option>
                </select>
                <input class="form-inline" type="number" ng-model="ctrl.transaction.amount"/>
                <input class="form-inline" type="text" placeholder="Opis" ng-model="ctrl.transaction.description"/>
                <button class="btn btn-primary" ng-click="ctrl.doTransfer()" ng-disabled="ctrl.formInvalid()">Zrób</button>
            </p>

            <p>Ostatni komunikat z serwera
                <span class="badge" ng-bind="ctrl.message"></span>
            </p>

            <h4>Historia</h4>
            Rekordów <span ng-bind="ctrl.history.length"></span> / <span ng-bind="ctrl.historyCount"></span>
            <input class="form-inline" type="text" placeholder="Filtruj" ng-model="ctrl.filter" ng-change="ctrl.refreshHistory()"/>
            <table class="table table-hover">
                <tr>
                    <th>Data</th>
                    <th style="text-align: center;">Operacja</th>
                    <th style="text-align: right;">Kwota</th>
                    <th style="text-align: left;">Opis</th>
                    <th style="text-align: right;">Saldo po</th>
                </tr>
                <tr ng-repeat="entry in ctrl.history">
                    <td ng-bind="ctrl.stamp2date(entry.date)"></td>
                    <td style="text-align: center;" ng-bind="entry.operation"></td>
                    <td style="text-align: right;" ng-bind="entry.amount"></td>
                    <td style="text-align: left;" ng-bind="entry.description"></td>
                    <td style="text-align: right;" ng-bind="entry.balance"></td>
                </tr>
            </table>
            <button class="btn btn-primary" ng-click="ctrl.loadMore()" ng-disabled="ctrl.history.length >= ctrl.historyCount">Więcej</button>
        </div>
	</div>
    
<script src="/js/angular.min.js"></script>
<script src="/js/ui-bootstrap-tpls.min.js"></script>
<script src="/js/angular-sanitize.min.js"></script>
<script src="/js/angular-route.min.js"></script>
<script src="/js/angular-animate.min.js"></script>
<script src="/js/ui-bootstrap-tpls.min.js"></script>

<script src="/js/app.js"></script>
<script src="/js/confirm.js"></script>
<script src="/js/home.js"></script>
<script src="/js/transfer.js"></script>
<script src="/js/history.js"></script>

</body></html>